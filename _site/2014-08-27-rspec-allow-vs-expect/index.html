<!DOCTYPE html>
<html lang="en">

<head>
    <title>RSpec: allow vs expect</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="blog, vumanhcuong, mido, jekyll">
    <meta name="author" content="vumanhcuong">
    
    
    

    <meta name="description" content="A minimal jekyll theme">
    <link href='https://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="icon" type="image/ico" href="http://localhost:4000/assets/favicon.ico">
    <link rel="shortcut-icon" type="image/ico" href="http://localhost:4000/assets/favicon.ico">

    <!-- For Facebook -->
    <meta property="og:title" content="RSpec: allow vs expect" />
    <meta property="og:image" content="http://localhost:4000/assets/favicon.ico" />
    <meta property="og:description" content="A minimal jekyll theme" />

    <!-- For Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="RSpec: allow vs expect" />
    <meta name="twitter:description" content="A minimal jekyll theme" />
    <meta name="twitter:image" content="http://localhost:4000/assets/favicon.ico" />
</head>


<body>
    <div class="wrapper">
        <div class="navbar container">
    <a id="site-title" class="alignable pull-left" href="http://localhost:4000">mido</a>
    <ul id="navlist" class="alignable pull-right navbar-ul">
        
        <li class="alignable pull-left navbar-list">
            <a href="http://localhost:4000/about">About</a>
            /
        </li>
        
        <li class="alignable pull-left navbar-list">
            <a href="http://localhost:4000/resume.pdf">Resume</a>
            
        </li>
        
    </ul>
</div>
<div style="clear:both"></div>

<hr>

        <div class="page-title">
            RSpec: allow vs expect
        </div>
        <div class="container">
            <div class="content">
                <div class="page-subtitle">
    
        
            <b>[</b>
        
        <a href="/tags/#ruby" title="ruby">ruby</a>
        
            -
        
    
        
        <a href="/tags/#unit test" title="unit test">unit test</a>
        
            <b>]</b>
        
    
</div>
<br>
<p>You know <strong>allow</strong> and <strong>expect</strong> are used in rspec-mocks, but you are confused with them ?. Don’t worry, I’ll explain them briefly.</p>

<h3 id="allow"><code class="highlighter-rouge">allow</code>:</h3>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">book</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="s2">"book"</span><span class="p">)</span>
<span class="n">allow</span><span class="p">(</span><span class="n">book</span><span class="p">).</span><span class="nf">to</span> <span class="n">receive</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">{</span> <span class="s2">"The RSpec Book"</span> <span class="p">}</span></code></pre></figure>

<p>You ASSUME that <strong>book object</strong> has a method <strong>title</strong> and it’ll return “The RSpec Book” when this method’s called.</p>

<h3 id="expect"><code class="highlighter-rouge">expect</code>:</h3>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">book</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="s2">"book"</span><span class="p">)</span>
<span class="n">allow</span><span class="p">(</span><span class="n">book</span><span class="p">).</span><span class="nf">to</span> <span class="n">receive</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">{</span> <span class="s2">"The RSpec Book"</span> <span class="p">}</span>
<span class="n">expect</span><span class="p">(</span><span class="n">book</span><span class="p">).</span><span class="nf">to</span> <span class="n">receive</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">{</span> <span class="s2">"The RSpec Book"</span> <span class="p">}</span></code></pre></figure>

<p>This example’s a bit different. You EXPECT that when <strong>book object</strong>  calls <strong>title method</strong>, it’ll return that string “The RSpec Book”.</p>

<h2 id="sum-up">Sum up:</h2>
<p>A big difference between them is that <strong>ASSUME</strong> and <strong>EXPECT</strong></p>

<h2 id="deep-magic">Deep magic:</h2>
<p><strong>why do we use ‘allow’ ?</strong>
To answer this question, we should refer to the concept of Test Doubles:</p>

<blockquote>
  <p>A test double is an object that stands in for another object in your system during a code example.</p>
</blockquote>

<p>This object isn’t existed in your real system, it doesn’t own methods and attributes. So we need to use <strong>allow</strong> to assume that this object has some methods and returns predefined values.</p>

<p>That’s all, and thanks for your concern. If you have any questions, please don’t hesitate to ask me :).</p>



            </div>
            <div class="footer">
                <div class="footer">
    <br><hr>
    <a href="https://github.com/pro-panda" style="color: black">Theme by pro-panda</a>
</div>

            </div>
        </div>
    </div>
</body>
